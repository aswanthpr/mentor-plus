"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const multer_1 = __importDefault(require("../Middleware/multer."));
const qaService_1 = __importDefault(require("../Service/implementation/qaService"));
const qaController_1 = __importDefault(require("../Controller/implementation/qaController"));
const menteeService_1 = require("../Service/implementation/menteeService");
// import authorize from "../Middleware/menteeAuthMiddleware";
const bookingService_1 = require("../Service/implementation/bookingService");
const menteeRepository_1 = __importDefault(require("../Repository/implementation/menteeRepository"));
const mentorRepository_1 = __importDefault(require("../Repository/implementation/mentorRepository"));
const answerRepository_1 = __importDefault(require("../Repository/implementation/answerRepository"));
const menteeController_1 = require("../Controller/implementation/menteeController");
const categoryRepository_1 = __importDefault(require("../Repository/implementation/categoryRepository"));
const questionRepository_1 = __importDefault(require("../Repository/implementation/questionRepository"));
const timeSlotRepository_1 = __importDefault(require("../Repository/implementation/timeSlotRepository"));
const bookingController_1 = require("../Controller/implementation/bookingController");
const notificationService_1 = require("../Service/implementation/notificationService");
const notificationRepository_1 = __importDefault(require("../Repository/implementation/notificationRepository"));
const slotScheduleRepository_1 = __importDefault(require("../Repository/implementation/slotScheduleRepository"));
const notificationController_1 = require("../Controller/implementation/notificationController");
const chatService_1 = __importDefault(require("../Service/implementation/chatService"));
const chatRepository_1 = __importDefault(require("../Repository/implementation/chatRepository"));
const chatController_1 = require("../Controller/implementation/chatController");
const walletService_1 = require("../Service/implementation/walletService");
const transactionRepository_1 = __importDefault(require("../Repository/implementation/transactionRepository"));
const walletController_1 = require("../Controller/implementation/walletController");
const walletRepository_1 = __importDefault(require("../Repository/implementation/walletRepository"));
const reviewController_1 = require("../Controller/implementation/reviewController");
const reviewRepository_1 = __importDefault(require("../Repository/implementation/reviewRepository"));
const reviewService_1 = require("../Service/implementation/reviewService");
const authorizeUser_1 = __importDefault(require("../Middleware/authorizeUser"));
const __menteeService = new menteeService_1.menteeService(menteeRepository_1.default, mentorRepository_1.default, categoryRepository_1.default, questionRepository_1.default);
const __qaService = new qaService_1.default(questionRepository_1.default, answerRepository_1.default, notificationRepository_1.default);
const __bookingService = new bookingService_1.bookingService(timeSlotRepository_1.default, slotScheduleRepository_1.default, notificationRepository_1.default, chatRepository_1.default, walletRepository_1.default, transactionRepository_1.default);
const __notificationService = new notificationService_1.notificationService(notificationRepository_1.default);
const __chatService = new chatService_1.default(chatRepository_1.default);
const __walletService = new walletService_1.walletService(walletRepository_1.default, transactionRepository_1.default, notificationRepository_1.default);
const __reviewService = new reviewService_1.reviewService(reviewRepository_1.default);
const __menteeController = new menteeController_1.menteeController(__menteeService);
const __qaController = new qaController_1.default(__qaService);
const __bookingController = new bookingController_1.bookingControlelr(__bookingService);
const __notificationController = new notificationController_1.notificationController(__notificationService);
const __chatController = new chatController_1.chatController(__chatService);
const __walletController = new walletController_1.walletController(__walletService);
const __reviewController = new reviewController_1.reviewController(__reviewService);
const mentee_Router = express_1.default.Router();
mentee_Router.post(`/refresh-token`, __menteeController.refreshToken.bind(__menteeController));
mentee_Router.post(`/logout`, __menteeController.menteeLogout.bind(__menteeController));
mentee_Router.get(`/explore`, (0, authorizeUser_1.default)('mentee'), __menteeController.exploreData.bind(__menteeController));
mentee_Router.get(`/profile`, (0, authorizeUser_1.default)('mentee'), __menteeController.menteeProfile.bind(__menteeController));
mentee_Router.put(`/profile/edit_profile`, (0, authorizeUser_1.default)('mentee'), __menteeController.menteeProfileEdit.bind(__menteeController));
mentee_Router.patch(`/profile/change_password`, (0, authorizeUser_1.default)('mentee'), __menteeController.passwordChange.bind(__menteeController));
mentee_Router.patch(`/profile/change_profile`, (0, authorizeUser_1.default)('mentee'), multer_1.default.fields([{ name: "profileImage", maxCount: 1 }]), __menteeController.profileChange.bind(__menteeController));
mentee_Router.get(`/qa`, (0, authorizeUser_1.default)('mentee'), __qaController.questionData.bind(__qaController));
mentee_Router.post(`/qa/add-question`, (0, authorizeUser_1.default)('mentee'), __qaController.addQuestion.bind(__qaController));
mentee_Router.patch(`/qa/edit-question`, (0, authorizeUser_1.default)('mentee'), __qaController.editQuestion.bind(__qaController));
mentee_Router.get(`/home/:filter`, (0, authorizeUser_1.default)('mentee'), __menteeController.homeData.bind(__menteeController));
mentee_Router.delete(`/qa/delete/:questionId`, (0, authorizeUser_1.default)('mentee'), __qaController.deleteQuestion.bind(__qaController));
mentee_Router.post(`/qa/create-answer`, (0, authorizeUser_1.default)('mentee'), __qaController.createNewAnswer.bind(__qaController));
mentee_Router.patch(`/qa/edit-answer`, (0, authorizeUser_1.default)('mentee'), __qaController.editAnswer.bind(__qaController));
mentee_Router.get(`/explore/similar-mentors`, (0, authorizeUser_1.default)('mentee'), __menteeController.getSimilarMentors.bind(__menteeController));
mentee_Router.get(`/slot-booking`, (0, authorizeUser_1.default)('mentee'), __bookingController.getTimeSlots.bind(__bookingController));
//slot book with rzorpay
mentee_Router.post(`/slot-booking`, (0, authorizeUser_1.default)('mentee'), __bookingController.slotBooking.bind(__bookingController));
mentee_Router.post("/booking/webhook", express_1.default.raw({ type: "application/json" }), __bookingController.stripeWebHook.bind(__bookingController));
// ./stripe listen --forward-to localhost:3000/mentee/webhook
mentee_Router.get(`/sessions`, (0, authorizeUser_1.default)('mentee'), __bookingController.getBookedSlot.bind(__bookingController));
mentee_Router.patch(`/sessions/cancel_request/:sessionId`, (0, authorizeUser_1.default)('mentee'), __bookingController.cancelSlot.bind(__bookingController));
mentee_Router.get(`/notification`, (0, authorizeUser_1.default)('mentee'), __notificationController.getNotification.bind(__notificationController));
mentee_Router.patch(`/notification-read/:notificationId`, (0, authorizeUser_1.default)('mentee'), __notificationController.markAsReadNotif.bind(__notificationController));
mentee_Router.get("/chats", (0, authorizeUser_1.default)('mentee'), __chatController.getChats.bind(__chatController));
mentee_Router.get("/messages", (0, authorizeUser_1.default)('mentee'), __chatController.getUserMessage.bind(__chatController));
mentee_Router.get(`/session/validate-session-join`, (0, authorizeUser_1.default)('mentee'), __bookingController.validateSessionJoin.bind(__bookingController));
//wallet'
mentee_Router.get(`/wallet`, (0, authorizeUser_1.default)('mentee'), __walletController.getWalletData.bind(__walletController));
mentee_Router.post("/wallet/add-money-wallet", (0, authorizeUser_1.default)('mentee'), __walletController.addMoneyToWallet.bind(__walletController));
mentee_Router.post("/wallet/webhook", express_1.default.raw({ type: "application/json" }), __walletController.walletStripeWebHook.bind(__walletController));
mentee_Router.post("/review-and-rating", (0, authorizeUser_1.default)('mentee'), __reviewController.reviewNdRateMentor.bind(__reviewController));
mentee_Router.get("/turn-credentials", (0, authorizeUser_1.default)('mentee'), __bookingController.turnServerConnection.bind(__bookingController));
exports.default = mentee_Router;
